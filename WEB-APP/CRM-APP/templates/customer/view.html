{% extends "common/base.html" %}

{% block contentBody %}
<div class="container">
	<div class="center-block">
		<h1>{{ cust.dispName }}</h1>
		<a href="javascript:" onclick="showDialog('edit?custid={{ cust.custid }}');">Edit</a>
	</div>
	<div id="custome_info" style="max-width:1000px">
		
		<div class="row">
			<label for="tvCellPhone" class="col-sm-3 control-label">手机号码</label>
			<div class="col-sm-8">
		  	{{ cust.cellphone }}
		  </div>
		</div>
		
		<div class="row">
			<label for="tvWork4" class="col-sm-3 control-label">所在公司</label>
			<div class="col-sm-8">
		  	{{ cust.work4 }}
		  </div>
		</div>
		<div class="row">
			<label for="tvHomeAdr" class="col-sm-3 control-label">住址</label>
			<div class="col-sm-8">
		  	{{ cust.homeAdr }}
		  </div>
		</div>
	</div>
	<div id="requirements" class="col-md-12">
		<div>
			<button id="btnAddRequirement" type="button" class="btn btn-lg">新增需求</button>
		</div>
		{% for i in cust.requirements : %}
		<div class="row">
			
			
			{{ render_buy(i) }}
			
		</div>
		{% endfor %}
	</div>
</div>
{% endblock %}
{% block scripts %}
<script type="text/javascript">
	$(function(){
		$("#btnAddRequirement").bind('click',function(){
			showDialog("requirement/new?custid={{cust.custid}}");
		});
		$(".btnReqEdit").bind("click",function(){
			var reqid=$(this).attr("data-id");
			showDialog("requirement/edit?custid={{cust.custid}}&&req="+reqid);
		});
	});
	
	
</script>
{% endblock %}
{% set FaceTo=dict(S="南") %}
{% macro render_buy(req) %}
	<div>购房</div>
	<div>{{req.district}}</div>
	<div>{{req.marks}}</div>
	<div>{{req.Bedroom}}房/{{req.Livingroom}}厅/{{req.Bathroom}}卫 {{FaceTo[req.FaceTo]}}</div>
	<div><a class="btnReqEdit" href="#" data-id="{{req._id}}">Edit</a></div>
{% endmacro %}